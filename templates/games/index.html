{% extends 'base.html' %}
{% load static %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ò–≥—Ä{% endblock %}

{% block content %}
<div class="hero-section">
    <h1>üéÆ –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ò–≥—Ä</h1>
    <p class="hero-subtitle">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏–µ –∏–≥—Ä—ã, —Å—Ç—É–¥–∏–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</p>
</div>

<!-- –§–∏–ª—å—Ç—Ä—ã -->
<div class="filters-container">
    <h2>–§–∏–ª—å—Ç—Ä—ã</h2>
    <form method="GET" id="filterForm" class="filters-form">
        <div class="filter-group">
            <label for="studio">–°—Ç—É–¥–∏—è:</label>
            <select name="studio" id="studio" class="filter-select">
                <option value="">–í—Å–µ —Å—Ç—É–¥–∏–∏</option>
                {% for studio in studios %}
                    <option value="{{ studio.id }}" {% if request.GET.studio == studio.id|stringformat:"s" %}selected{% endif %}>
                        {{ studio.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="filter-group">
            <label for="engine">–î–≤–∏–∂–æ–∫:</label>
            <select name="engine" id="engine" class="filter-select">
                <option value="">–í—Å–µ –¥–≤–∏–∂–∫–∏</option>
                {% for engine in engines %}
                    <option value="{{ engine.id }}" {% if request.GET.engine == engine.id|stringformat:"s" %}selected{% endif %}>
                        {{ engine.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="filter-group">
            <label for="year">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:</label>
            <select name="year" id="year" class="filter-select">
                <option value="">–í—Å–µ –≥–æ–¥—ã</option>
                {% for year in years %}
                    <option value="{{ year }}" {% if request.GET.year == year|stringformat:"s" %}selected{% endif %}>
                        {{ year }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="filter-actions">
            <button type="submit" class="btn btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            <a href="{% url 'index' %}" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</a>
        </div>
    </form>
</div>

<!-- –°—á–µ—Ç—á–∏–∫ –∏–≥—Ä -->
<div class="games-count">
    <p>–ù–∞–π–¥–µ–Ω–æ –∏–≥—Ä: <strong>{{ games.count }}</strong></p>
</div>

<!-- –°–µ—Ç–∫–∞ –∏–≥—Ä -->
{% if games %}
    <div class="games-grid">
        {% for game in games %}
            <div class="game-card" data-game-id="{{ game.id }}">
                {% if game.cover %}
                    <img src="{{ game.cover.url }}" alt="{{ game.title }}">
                {% else %}
                    <div class="game-placeholder">
                        <span>üéÆ</span>
                    </div>
                {% endif %}
                <div class="game-card-content">
                    <h3><a href="{% url 'game_detail' game.id %}">{{ game.title }}</a></h3>
                    <p class="game-year">üìÖ {{ game.release_year }}</p>
                    <p class="game-studio">üè¢ {{ game.studio.name }}</p>
                    {% if game.engine %}
                        <p class="game-engine">‚öôÔ∏è {{ game.engine.name }}</p>
                    {% endif %}
                    {% if game.platforms.all %}
                        <div class="game-platforms">
                            {% for platform in game.platforms.all %}
                                <span class="platform-badge">{{ platform.name }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="no-results">
        <p>üòî –ò–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ <a href="{% url 'index' %}">—Å–±—Ä–æ—Å–∏—Ç—å</a> –∏—Ö.</p>
    </div>
{% endif %}
{% endblock %}

